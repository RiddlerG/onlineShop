{% extends 'base.html' %}
{% load static %}


{% block title %}
    Контакты 
{% endblock %}


{% block scripts %}
    <script src="{% static 'js/jquery-smartphoto.min.js' %}"></script>
    <script src="{% static 'js/stickyfill.min.js' %}"></script>
    <script src="{% static 'js/focus-fix.jquery.js' %}"></script>
    <script src="{% static 'js/jquery.matchHeight-min.js' %}"></script>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    <script src="{% static 'js/map.js' %}"></script>
    <script src="{% static 'js/jquery.maskedinput-1.3.min.js' %}"></script>
    <script src="{% static 'js/slick.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>

    <script src='https://www.google.com/recaptcha/api.js'></script>
{% endblock %}


{% block content %}

    <div class="container">
        <div class="row">
            <div class="col-xl-3">
                <div class="contacts-info">
                    <h1>Наши контакты</h1>
                    <address>
                        <ul class="list-unstyled">
                            <li>
                                <i class="fas fa-map-marker-alt i-pre" style="color:#fecb00;"></i>{% for address in addresses %}{{ address.address }}<br>{% endfor %}
                            </li>
                            <li>
                                <i class="fas fa-phone i-pre" style="color:#fecb00;"></i>{% for phone in phones %}{{ phone.phone }}<br>{% endfor %}
                            </li>
                            <li>
                                <i class="fab fa-whatsapp i-pre" style="color:#7ad06d;"></i>{% for messenger in messengers %}{{ messenger.number }}<br>{% endfor %}
                            </li>
                            <li>
                                <i class="fas fa-envelope i-pre" style="color:#fecb00;"></i>{% for email in emails %}<a href="mailto:{{ email.email }}">{{ email.email }}</a><br>{% endfor %}
                            </li>
                            <li>
                                <i class="fas fa-clock i-pre" style="color:#fecb00;"></i>{% for point in schedule %}<b>{{ point.days_point }}</b> {{ point.time_point }}<br>{% endfor %}
                            </li>
                        </ul>
                    </address>
                    <a class="btn btn-primary btn-block" href="#" role="button" data-toggle="modal" data-target="#exampleModal"><i class="fas fa-phone-volume i-pre"></i>заказать звонок</a>
                    <a class="btn btn-primary btn-block" href="#" role="button" data-toggle="modal" data-target="#exampleModal2"><i class="fas fa-comment i-pre"></i>обратная связь</a>
                </div>
            </div>
        </div>
    </div>
    <div id="MapContacts" style="width: 100%; height: 700px"></div>

    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Заказать звонок</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form method="POST" id="callback-form" action="{% url 'callback' %}">
                        {% csrf_token %}
                        <div class="form-group">
                            <input type="text" class="form-control phone-input" placeholder="Ваш телефон">
                        </div>

                        <div class="form-group">
                            <input type="text" class="form-control time-input" placeholder="Позвонить сейчас">
                        </div>

                        <button type="submit" class="btn btn-primary btn-block callback-submit">Заказать звонок</button>

                        <div class="alert alert-success d-none" role="alert">
                            <i class="fas fa-check-circle fa-3x"></i>
                            <h5>Спасибо за заявку!</h5>
                            <p>Ожидайте звонка менеджера в указанное Вами время</p>
                        </div>

                        <div class="alert alert-danger d-none" role="alert">
                            <i class="fas fa-exclamation-circle fa-3x"></i>
                            <h5>Ошибка при отправке</h5>
                            <p>Мы не получили Вашу заявку. Повторите попытку позже.</p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModal2Label" aria-hidden="true">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModal2Label">Напишите нам</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form  method="POST" id="feedback-form" action="{% url 'feedback' %}">
                        {% csrf_token %}
                        <div class="form-group">
                            {{ form.phone_or_email }}
                        </div>

                        <div class="form-group">
                            {{ form.name }}
                        </div>

                        <div class="form-group">
                            {{ form.message }}
                        </div>

                        <div class="form-group g-recaptcha mb-4" data-sitekey="6LcNnpAUAAAAAFizBV4waAV1Ehe7WBafr1RP6epY"></div>

                        <button type="submit" class="btn btn-primary btn-block feedback-submit">Отправить</button>
                        
                        <div class="alert alert-success d-none" role="alert">
                            <i class="fas fa-check-circle fa-3x"></i>
                            <h5>Спасибо за заявку!</h5>
                            <p>Ожидайте звонка менеджера в указанное Вами время</p>
                        </div>

                        <div class="alert alert-danger d-none" role="alert">
                            <i class="fas fa-exclamation-circle fa-3x"></i>
                            <h5>Ошибка при отправке</h5>
                            <p>Мы не получили Вашу заявку. Повторите попытку позже.</p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}